package dc.visao.contabilidade;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.PopupDateField;
import com.vaadin.ui.TextArea;
import com.vaadin.ui.TextField;

import dc.entidade.contabilidade.PlanoContaRefSped;
import dc.visao.framework.util.ComponentUtil;

public class PlanoContaRefSpedFormView extends CustomComponent {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;

	@AutoGenerated
	private GridLayout mainLayout;

	private TextField txCodigoConta;
	private TextField txDescricao;
	private TextArea txaOrientacoes;
	private PopupDateField dtValidadeInicio;
	private PopupDateField dtValidadeFim;
	private ComboBox cbTipo;

	public PlanoContaRefSpedFormView() {
		buildMainLayout();
		setCompositionRoot(mainLayout);
	}

	@AutoGenerated
	private GridLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new GridLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("100%");
		mainLayout.setHeight("-1px");
		mainLayout.setMargin(true);
		mainLayout.setSpacing(true);
		mainLayout.setRows(4);
		mainLayout.setColumns(4);
		// top-level component properties
		setWidth("100.0%");
		setHeight("-1px");

		txCodigoConta = ComponentUtil.buildTextField("Código Conta");
		mainLayout.addComponent(txCodigoConta, 0, 0);

		txDescricao = ComponentUtil.buildTextField("Descrição");
		mainLayout.addComponent(txDescricao, 1, 0, 3, 0);

		txaOrientacoes = ComponentUtil.buildTextArea("Orientações");
		mainLayout.addComponent(txaOrientacoes, 0, 1, 3, 2);

		dtValidadeInicio = ComponentUtil.buildPopupDateField("Data Validade Início");
		mainLayout.addComponent(dtValidadeInicio, 0, 3);

		dtValidadeFim = ComponentUtil.buildPopupDateField("Data Validade Fim");
		mainLayout.addComponent(dtValidadeFim, 1, 3);

		cbTipo = ComponentUtil.buildComboBox("Tipo");
		mainLayout.addComponent(cbTipo, 2, 3);

		return mainLayout;
	}

	public void preencheBean(PlanoContaRefSped currentBean) {
		currentBean.setCodCtaRef(txCodigoConta.getValue());
		currentBean.setDescricao(txDescricao.getValue());
		currentBean.setFimValidade(dtValidadeFim.getValue());
		currentBean.setInicioValidade(dtValidadeInicio.getValue());
		currentBean.setOrientacoes(txaOrientacoes.getValue());
		currentBean.setTipo(((Tipo) cbTipo.getValue()).getCodigo());

	}

	public void preencheForm(PlanoContaRefSped currentBean) {
		txCodigoConta.setValue(currentBean.getCodCtaRef());
		txDescricao.setValue(currentBean.getDescricao());
		dtValidadeFim.setValue(currentBean.getFimValidade());
		dtValidadeInicio.setValue(currentBean.getInicioValidade());
		txaOrientacoes.setValue(currentBean.getOrientacoes());
		cbTipo.setValue(Tipo.getTipo(currentBean.getTipo()));
	}

	public enum Tipo {

		SINTETICA("Sintética", "S"), ANALITICA("Analítica", "A");

		private Tipo(String label, String codigo) {
			this.label = label;
			this.codigo = codigo;
		}

		private String label;
		private String codigo;

		public static Tipo getTipo(String codigo) {
			for (Tipo e : Tipo.values()) {
				if (e.getCodigo().equalsIgnoreCase(codigo)) {
					return e;
				}
			}

			return null;
		}

		public String getCodigo() {
			return codigo;
		}

		public String getLabel() {
			return label;
		}

		@Override
		public String toString() {
			return label;
		}
	}

	public TextField getTxCodigoConta() {
		return txCodigoConta;
	}

	public void setTxCodigoConta(TextField txCodigoConta) {
		this.txCodigoConta = txCodigoConta;
	}

	public TextField getTxDescricao() {
		return txDescricao;
	}

	public void setTxDescricao(TextField txDescricao) {
		this.txDescricao = txDescricao;
	}

	public TextArea getTxaOrientacoes() {
		return txaOrientacoes;
	}

	public void setTxaOrientacoes(TextArea txaOrientacoes) {
		this.txaOrientacoes = txaOrientacoes;
	}

	public PopupDateField getDtValidadeInicio() {
		return dtValidadeInicio;
	}

	public void setDtValidadeInicio(PopupDateField dtValidadeInicio) {
		this.dtValidadeInicio = dtValidadeInicio;
	}

	public PopupDateField getDtValidadeFim() {
		return dtValidadeFim;
	}

	public void setDtValidadeFim(PopupDateField dtValidadeFim) {
		this.dtValidadeFim = dtValidadeFim;
	}

	public ComboBox getCbTipo() {
		return cbTipo;
	}

	public void setCbTipo(ComboBox cbTipo) {
		this.cbTipo = cbTipo;
	}
}