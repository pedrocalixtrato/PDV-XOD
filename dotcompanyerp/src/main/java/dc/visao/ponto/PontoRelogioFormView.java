package dc.visao.ponto;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;

import dc.entidade.ponto.PontoRelogio;
import dc.visao.framework.util.ComponentUtil;

public class PontoRelogioFormView extends CustomComponent {

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private GridLayout gridLayout_1;
	@AutoGenerated
	private ComboBox cmbUtilizacao;
	@AutoGenerated
	private TextField txFabricante;
	@AutoGenerated
	private TextField txMarca;
	@AutoGenerated
	private TextField txNumSerie;
	@AutoGenerated
	private TextField txLocalizacao;

	/**
	 * The constructor should first build the main layout, set the composition
	 * root and then do any custom initialization.
	 * 
	 * The constructor will not be automatically regenerated by the visual
	 * editor.
	 */
	public PontoRelogioFormView() {
		buildMainLayout();
		setCompositionRoot(mainLayout);

		// TODO add user code here
	}

	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setSizeFull();
		mainLayout.setMargin(false);
		mainLayout.setSpacing(true);
		// top-level component properties
		setWidth("100.0%");
		setHeight("100.0%");

		// gridLayout_1
		gridLayout_1 = buildGridLayout_1();
		mainLayout.addComponent(gridLayout_1);

		return mainLayout;
	}

	@AutoGenerated
	private GridLayout buildGridLayout_1() {
		// common part: create layout
		gridLayout_1 = new GridLayout();
		gridLayout_1.setImmediate(false);
		gridLayout_1.setSpacing(true);
		gridLayout_1.setWidth("100%");
		gridLayout_1.setColumns(2);
		gridLayout_1.setRows(3);

		// txLocalizacao
		txLocalizacao = ComponentUtil.buildTextField("Localização");
		gridLayout_1.addComponent(txLocalizacao, 0, 0);

		// txNumSerie
		txNumSerie = ComponentUtil.buildTextField("Número de Série");
		gridLayout_1.addComponent(txNumSerie, 1, 0);

		// txMarca
		txMarca = ComponentUtil.buildTextField("Marca");
		gridLayout_1.addComponent(txMarca, 0, 1);

		// txFabricante
		txFabricante = ComponentUtil.buildTextField("Fabricante");
		gridLayout_1.addComponent(txFabricante, 1, 1);

		// cmbUtilizacao
		cmbUtilizacao = ComponentUtil.buildComboBox("Utilização");
		gridLayout_1.addComponent(cmbUtilizacao, 0, 2);

		return gridLayout_1;
	}

	public void preencheForm(PontoRelogio currentBean) {
		txFabricante.setValue(currentBean.getFabricante());
		txLocalizacao.setValue(currentBean.getLocalizacao());
		txMarca.setValue(currentBean.getMarca());
		txNumSerie.setValue(currentBean.getNumeroSerie());
		cmbUtilizacao.setValue(UtilizacaoRelogioPonto.getUtilizacao(currentBean.getUtilizacao()));
	}

	public void preencheBean(PontoRelogio currentBean) {
		currentBean.setFabricante(txFabricante.getValue());
		currentBean.setLocalizacao(txLocalizacao.getValue());
		currentBean.setMarca(txMarca.getValue());
		currentBean.setNumeroSerie(txNumSerie.getValue());
		currentBean.setUtilizacao(((UtilizacaoRelogioPonto) cmbUtilizacao.getValue()).getCodigo());
	}

	public void carrregarUtilizacao() {
		cmbUtilizacao.removeAllItems();
		cmbUtilizacao.addItem(UtilizacaoRelogioPonto.PONTO);
	}

	public enum UtilizacaoRelogioPonto {
		PONTO("Ponto", "P"), REFEITORIO("Refeitório", "R"), CIRCULACAO("Circulação", "C");

		private UtilizacaoRelogioPonto(String label, String codigo) {
			this.label = label;
			this.codigo = codigo;
		}

		private String label;
		private String codigo;

		public static UtilizacaoRelogioPonto getUtilizacao(String codigo) {
			for (UtilizacaoRelogioPonto e : UtilizacaoRelogioPonto.values()) {
				if (e.getCodigo().equalsIgnoreCase(codigo)) {
					return e;
				}
			}

			return null;
		}

		public String getCodigo() {
			return codigo;
		}

		public String getLabel() {
			return label;
		}

		@Override
		public String toString() {
			return label;
		}
	}

	public ComboBox getCmbUtilizacao() {
		return cmbUtilizacao;
	}

	public void setCmbUtilizacao(ComboBox cmbUtilizacao) {
		this.cmbUtilizacao = cmbUtilizacao;
	}

	public TextField getTxFabricante() {
		return txFabricante;
	}

	public void setTxFabricante(TextField txFabricante) {
		this.txFabricante = txFabricante;
	}

	public TextField getTxMarca() {
		return txMarca;
	}

	public void setTxMarca(TextField txMarca) {
		this.txMarca = txMarca;
	}

	public TextField getTxNumSerie() {
		return txNumSerie;
	}

	public void setTxNumSerie(TextField txNumSerie) {
		this.txNumSerie = txNumSerie;
	}

	public TextField getTxLocalizacao() {
		return txLocalizacao;
	}

	public void setTxLocalizacao(TextField txLocalizacao) {
		this.txLocalizacao = txLocalizacao;
	}

}
